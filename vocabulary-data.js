// TOEIC vocabulary database organized by difficulty level
export const vocabularyData = {
  // Level 1: Basic (300-450 TOEIC score range)
  basic: [
    {
      word: "important",
      meaning: "重要な",
      choices: ["重要な", "簡単な", "美しい", "困難な"],
      correct: 0
    },
    {
      word: "company",
      meaning: "会社",
      choices: ["会社", "学校", "病院", "工場"],
      correct: 0
    },
    {
      word: "meeting",
      meaning: "会議",
      choices: ["会議", "食事", "旅行", "買い物"],
      correct: 0
    },
    {
      word: "business",
      meaning: "事業",
      choices: ["事業", "趣味", "スポーツ", "音楽"],
      correct: 0
    },
    {
      word: "experience",
      meaning: "経験",
      choices: ["経験", "実験", "期待", "説明"],
      correct: 0
    },
    {
      word: "customer",
      meaning: "顧客",
      choices: ["顧客", "店員", "管理者", "配達員"],
      correct: 0
    },
    {
      word: "product",
      meaning: "製品",
      choices: ["製品", "計画", "問題", "解決"],
      correct: 0
    },
    {
      word: "service",
      meaning: "サービス",
      choices: ["サービス", "製品", "価格", "品質"],
      correct: 0
    },
    {
      word: "information",
      meaning: "情報",
      choices: ["情報", "教育", "娯楽", "交通"],
      correct: 0
    },
    {
      word: "project",
      meaning: "プロジェクト",
      choices: ["プロジェクト", "製品", "会社", "部門"],
      correct: 0
    }
  ],

  // Level 2: Intermediate (450-650 TOEIC score range)
  intermediate: [
    {
      word: "efficient",
      meaning: "効率的な",
      choices: ["効率的な", "効果的な", "経済的な", "実用的な"],
      correct: 0
    },
    {
      word: "significant",
      meaning: "重要な",
      choices: ["重要な", "複雑な", "単純な", "困難な"],
      correct: 0
    },
    {
      word: "deadline",
      meaning: "締切",
      choices: ["締切", "開始", "延期", "取消"],
      correct: 0
    },
    {
      word: "negotiate",
      meaning: "交渉する",
      choices: ["交渉する", "決定する", "延期する", "中止する"],
      correct: 0
    },
    {
      word: "revenue",
      meaning: "収益",
      choices: ["収益", "費用", "予算", "投資"],
      correct: 0
    },
    {
      word: "competitive",
      meaning: "競争力のある",
      choices: ["競争力のある", "協力的な", "創造的な", "建設的な"],
      correct: 0
    },
    {
      word: "analyze",
      meaning: "分析する",
      choices: ["分析する", "要約する", "批判する", "評価する"],
      correct: 0
    },
    {
      word: "implement",
      meaning: "実行する",
      choices: ["実行する", "計画する", "中止する", "延期する"],
      correct: 0
    },
    {
      word: "strategy",
      meaning: "戦略",
      choices: ["戦略", "戦術", "作戦", "計画"],
      correct: 0
    },
    {
      word: "proposal",
      meaning: "提案",
      choices: ["提案", "報告", "要求", "命令"],
      correct: 0
    }
  ],

  // Level 3: Advanced (650-850 TOEIC score range)
  advanced: [
    {
      word: "comprehensive",
      meaning: "包括的な",
      choices: ["包括的な", "部分的な", "表面的な", "専門的な"],
      correct: 0
    },
    {
      word: "allocate",
      meaning: "割り当てる",
      choices: ["割り当てる", "削減する", "増加する", "評価する"],
      correct: 0
    },
    {
      word: "acquisition",
      meaning: "買収",
      choices: ["買収", "合併", "分離", "解散"],
      correct: 0
    },
    {
      word: "subsidiary",
      meaning: "子会社",
      choices: ["子会社", "親会社", "競合他社", "関連会社"],
      correct: 0
    },
    {
      word: "consolidate",
      meaning: "統合する",
      choices: ["統合する", "分離する", "拡張する", "削減する"],
      correct: 0
    },
    {
      word: "procurement",
      meaning: "調達",
      choices: ["調達", "販売", "製造", "配送"],
      correct: 0
    },
    {
      word: "leverage",
      meaning: "活用する",
      choices: ["活用する", "放棄する", "削減する", "無視する"],
      correct: 0
    },
    {
      word: "infrastructure",
      meaning: "インフラ",
      choices: ["インフラ", "建築", "設備", "構造"],
      correct: 0
    },
    {
      word: "contingency",
      meaning: "偶発事象",
      choices: ["偶発事象", "予定事項", "必然事項", "優先事項"],
      correct: 0
    },
    {
      word: "feasibility",
      meaning: "実現可能性",
      choices: ["実現可能性", "収益性", "持続性", "柔軟性"],
      correct: 0
    }
  ],

  // Level 4: Expert (850+ TOEIC score range)
  expert: [
    {
      word: "synergy",
      meaning: "相乗効果",
      choices: ["相乗効果", "副作用", "反作用", "無効果"],
      correct: 0
    },
    {
      word: "paradigm",
      meaning: "パラダイム",
      choices: ["パラダイム", "プロトコル", "プロセス", "プログラム"],
      correct: 0
    },
    {
      word: "proliferate",
      meaning: "急増する",
      choices: ["急増する", "減少する", "停滞する", "変動する"],
      correct: 0
    },
    {
      word: "ubiquitous",
      meaning: "至る所にある",
      choices: ["至る所にある", "稀な", "特別な", "限定的な"],
      correct: 0
    },
    {
      word: "nomenclature",
      meaning: "専門用語",
      choices: ["専門用語", "一般用語", "略語", "俗語"],
      correct: 0
    },
    {
      word: "benchmark",
      meaning: "基準",
      choices: ["基準", "目標", "限界", "平均"],
      correct: 0
    },
    {
      word: "methodology",
      meaning: "方法論",
      choices: ["方法論", "理論", "実践", "経験"],
      correct: 0
    },
    {
      word: "optimization",
      meaning: "最適化",
      choices: ["最適化", "標準化", "単純化", "複雑化"],
      correct: 0
    },
    {
      word: "proprietary",
      meaning: "独占的な",
      choices: ["独占的な", "共有の", "公開の", "標準の"],
      correct: 0
    },
    {
      word: "jurisdiction",
      meaning: "管轄権",
      choices: ["管轄権", "所有権", "使用権", "著作権"],
      correct: 0
    }
  ]
};

// Function to get a random set of questions from all levels
export function getRandomQuestions(count = 30) {
  const allQuestions = [
    ...vocabularyData.basic,
    ...vocabularyData.intermediate,
    ...vocabularyData.advanced,
    ...vocabularyData.expert
  ];
  
  // Shuffle the array and return the specified count
  const shuffled = allQuestions.sort(() => 0.5 - Math.random());
  return shuffled.slice(0, count);
}

// Function to calculate TOEIC score based on correct answers and difficulty
export function calculateTOEICScore(results) {
  let totalScore = 0;
  let basicCorrect = 0;
  let intermediateCorrect = 0;
  let advancedCorrect = 0;
  let expertCorrect = 0;
  
  results.forEach(result => {
    if (result.correct) {
      if (vocabularyData.basic.find(q => q.word === result.word)) {
        basicCorrect++;
        totalScore += 20;
      } else if (vocabularyData.intermediate.find(q => q.word === result.word)) {
        intermediateCorrect++;
        totalScore += 25;
      } else if (vocabularyData.advanced.find(q => q.word === result.word)) {
        advancedCorrect++;
        totalScore += 35;
      } else if (vocabularyData.expert.find(q => q.word === result.word)) {
        expertCorrect++;
        totalScore += 45;
      }
    }
  });
  
  // Base calculation with level weighting
  const baseScore = Math.min(990, Math.max(10, totalScore * 1.2));
  
  // Adjust based on difficulty distribution performance
  let adjustedScore = baseScore;
  
  // Bonus for higher level performance
  if (expertCorrect > 0) adjustedScore += expertCorrect * 15;
  if (advancedCorrect > 0) adjustedScore += advancedCorrect * 10;
  
  // Ensure score is within TOEIC range
  return Math.min(990, Math.max(10, Math.round(adjustedScore)));
}

// Function to get level breakdown analysis
export function getLevelBreakdown(results) {
  const breakdown = {
    basic: { correct: 0, total: 0 },
    intermediate: { correct: 0, total: 0 },
    advanced: { correct: 0, total: 0 },
    expert: { correct: 0, total: 0 }
  };
  
  results.forEach(result => {
    if (vocabularyData.basic.find(q => q.word === result.word)) {
      breakdown.basic.total++;
      if (result.correct) breakdown.basic.correct++;
    } else if (vocabularyData.intermediate.find(q => q.word === result.word)) {
      breakdown.intermediate.total++;
      if (result.correct) breakdown.intermediate.correct++;
    } else if (vocabularyData.advanced.find(q => q.word === result.word)) {
      breakdown.advanced.total++;
      if (result.correct) breakdown.advanced.correct++;
    } else if (vocabularyData.expert.find(q => q.word === result.word)) {
      breakdown.expert.total++;
      if (result.correct) breakdown.expert.correct++;
    }
  });
  
  return breakdown;
}